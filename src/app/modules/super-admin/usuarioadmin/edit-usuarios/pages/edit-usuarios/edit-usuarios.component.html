<div class="container mt-3">
  <div class="row jumbotron box8" style="background-color: rgb(255, 255, 255);">
    <div class="container">
      <div class="row">
        <section class="col-lg-12">
          <div class="card">
            <div class="card-header">
              <i class="fa fa-align-justify"></i> Tabla Usuarios
            </div>
            <div class="card-body">
              <table class="table table-responsive-card">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Usuario</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Apellido</th>
                    <th scope="col">Rol</th>
                    <th scope="col">Estado</th>
                    <th scope="col">Foto</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let usuario of listaUsuarios | paginate: { itemsPerPage: 4, currentPage:pageActual}">
                    <th scode="row">{{usuario.idUsuario}}</th>
                    <td>{{usuario.username}}</td>
                    <td>{{usuario.persona.nombre}}</td>
                    <td>{{usuario.persona.apellido}}</td>
                    <td>{{usuario.rol.nombre}}</td>
                    <td>{{usuario.estado}}</td>
                    <td><img class="circular--square"
                        [src]="'http://localhost:5000/image/images/' + this.usuario.persona.foto"
                        style="margin: 0 auto;  width: 70px; height: 70px;"></td>

                    <td><Input type="image" src="../../../../../../../assets/img/icons8-diseÃ±o-64.png" width="50"
                        height="50" icon="pi pi-pencil" label="" class="p-button-warning"
                        (click)="editarUsuario(usuario)" /></td>

                  </tr>
                </tbody>
              </table>
              <pagination-controls (pageChange)="pageActual = $event"></pagination-controls>
            </div>
          </div>
        </section>
        <!--/.col-->


        <!--/.col-->
      </div>
    </div>



  </div>
</div>

<!-- Modal -->
<p-dialog header="Editar usuario" [(visible)]="displayEU" [modal]="true" [style]="{width: '75vw'}" [baseZIndex]="10000"
  [draggable]="false" [resizable]="false">



  <body class="d-flex h-100 text-center">
    <div class="container">
      <div class="card">
        <div class="content"> <i class="fa fa-lock" aria-hidden="true"></i>
          <h2 class="form-label-p text-center">Datos Usuario</h2>

          <div class="perfil-usuario-avatar text-center">
            <img alt="..." style="max-width: 30%;" [src]="'http://localhost:5000/image/images/' + persona.foto">
            <div class="col-xs-12 col-sm-6">
              <div class="p-col-12 p-md-4">
            <div class="form-group">
              <h5>Username:</h5>
              <input [(ngModel)]="usuario.username" type="text" class="inputbox" name="Username"
                id="Username" placeholder="Username:" required />
            </div>
  
            <div class="form-group">
              <h5>Password:</h5>
              <input [(ngModel)]="usuario.password" type="password" class="inputbox" name="Password"
                id="Password" placeholder="" required />
            </div>
          </div>
            
        </div>

          </div>
         

          <div class="items panel over overflow-auto p-grid p-fluid">

      

            <form id="claim">
              <section id="step1" class="form-step" data-step="1">
                <fieldset>
                  <div class="row">
                    <div class="col-xs-12 col-sm-12">

                    </div>
                    <div class="col-xs-12 col-sm-6">
                      <div class="p-col-12 p-md-4">
                        <span class="p-float-label">
                          <div class="form-group ">
                            <h5>Cedula:</h5>
                            <input [(ngModel)]="persona.cedula" type="text" class="inputbox" name="Cedula" id="Cedula"
                              placeholder="Cedula:" required />

                          </div>
                          <div class="form-group">
                            <h5>Nombre:</h5>
                            <input class="input-margin" [(ngModel)]="persona.nombre" type="text" class="inputbox"
                              name="Nombre" id="Nombre" placeholder="Nombre:" required />

                          </div>
                          <div class="form-group">

                            <h5>Apellido:</h5>
                            <input [(ngModel)]="persona.apellido" type="text" class="inputbox" name="Apellido"
                              id="Apellido" placeholder="Apellido:" required />

                          </div>
                          <div class="form-group">

                            <h5>Fecha Nacimiento:</h5>
                            <input [(ngModel)]="persona.fechaNacimmiento" type="date" class="inputbox"
                              name="fecha_nacimiento" id="fecha_nacimiento" placeholder="" required />

                          </div>
                          <div class="form-group">

                            <h5>Celular</h5>
                            <input [(ngModel)]="persona.celular" type="text" class="inputbox" name="Celular"
                              id="Celular" placeholder="Celular:" required />

                          </div>
                        </span>
                      </div>
                    </div>



                    <div class="col-xs-12 col-sm-6">
                      <div class="p-col-12 p-md-4">
                        <span class="p-float-label">
                          <div class="form-group">
                            <h5>Genero:</h5>
                            <input [(ngModel)]="persona.genero" type="text" class="inputbox" name="Genero" id="Genero"
                              placeholder="Genero:" required />
                          </div>
                          <div class="form-group">
                            <h5>Direccion:</h5>
                            <input [(ngModel)]="persona.direccion" type="text" class="inputbox" name="Direccion"
                              id="Direccion" placeholder="Direccion:" required />
                          </div>
                          <div class="form-group">
                            <h5>Email:</h5>
                            <input [(ngModel)]="persona.email" type="text" class="inputbox" name="Email" id="Email"
                              placeholder="Email:" required />
                          </div>
                          <div class="form-group">
                            <h5>Telefono:</h5>
                            <input [(ngModel)]="persona.telefono" type="text" class="inputbox" name="Telefono"
                              id="Telefono" placeholder="Telefono:" required />
                          </div>
                          <div class="form-group">
                            <h5>Foto:</h5>
                            <span class="p-float-label">
                              <input (change)="imageSelected($event)" formControlName="foto" accept="image/*"
                                name="foto" type="file" class="inputbox" id="float-input" required />
                              <label for="float-input"></label>
                            </span>
                            <div *ngIf="file" class="mt-3 text-center">
                              <img [src]="file" class="rounded" alt="..." style="max-width: 50%;" />
                            </div>
                          </div>

                          

                        </span>
                      </div>
                    </div>


                  </div>

                </fieldset>
              </section>









            </form>
            <div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </body>





  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" label="Cancelar" icon="pi pi-times" iconPos="right"
      class="p-button-rounded p-button-danger" (click)="limpiar()">Cancelar</button>
    <button type="button" (click)="actualizarUsuario()" class="btn btn-primary">Actualizar</button>
  </div>
</p-dialog>